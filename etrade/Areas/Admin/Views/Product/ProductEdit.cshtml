@model etrade.Models.ProductViewModel

@{
    var allCategories = ViewBag.Categories as List<etrade.Entity.Category> ?? new List<etrade.Entity.Category>();
    var allSubCategories = ViewBag.SubCategories as List<etrade.Entity.SubCategory> ?? new List<etrade.Entity.SubCategory>();
    var allColors = ViewBag.Colors as List<etrade.Entity.Color> ?? new List<etrade.Entity.Color>();
    var allSizes = ViewBag.Sizes as List<etrade.Entity.Size> ?? new List<etrade.Entity.Size>();
    var colorImages = ViewBag.ColorImages as IEnumerable<etrade.Models.ColorImageViewModel> ?? new List<etrade.Models.ColorImageViewModel>();
}
@if (TempData["Error"] != null)
{
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        @TempData["Error"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close">
        </button>
    </div>
}

@if (TempData["Success"] != null)
{
    <div class="alert alert-success alert-dismissible fade show" role="alert">
        @TempData["Success"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close">
        </button>
    </div>
}

<div class="text-end mb-3">
    <a class="btn btn-purple" href="/Admin/Product/ProductList">Deƒüi≈üiklikleri Tamamla</a>
</div>
<div class="card">
    <div class="card-body">
                <div class="container mt-4">
            <ul class="nav nav-tabs">
                <li class="nav-item">
                    <button class="nav-link" id="basicTab" data-bs-toggle="tab" data-bs-target="#basic">
                        <i class='bx bx-box' ></i> &nbsp; Temel Bilgiler
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" id="variantsTab" data-bs-toggle="tab" data-bs-target="#variants">
                        <i class='bx bx-palette'></i> &nbsp; Renkler ve Fotoƒüraflar
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" id="stockTab" data-bs-toggle="tab" data-bs-target="#stock">
                        <i class='bx bx-purchase-tag-alt'></i> &nbsp; Beden ve Stok Bilgisi
                    </button>
                </li>
            </ul>
            

            <div class="tab-content mt-3">
                <!-- Temel Bilgiler Sekmesi -->
                <div class="tab-pane fade show active" id="basic">
                    <form id="productForm" method="post" enctype="multipart/form-data" action="/Admin/Product/Update">
                        <input type="hidden" name="Id" value="@Model.Id" />

                        <div class="form-group mb-3">
                            <label for="Name">√úr√ºn Adƒ±:</label>
                            <input type="text" class="form-control" id="Name" name="Name" value="@Model.Name" />
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                        
                                <div class="form-group mb-3">
                                    <label for="CategoryId">Kategori:</label>
                                    <select class="form-select" id="CategoryId" name="CategoryId" onchange="filterSubCategories()">
                                        <option value="">Kategori Se√ß</option>
                                        @foreach (var category in allCategories)
                                        {
                                            <option value="@category.Id" selected="@(category.Id == Model.CategoryId ? "selected" : null)">
                                                @category.Name
                                            </option>
                                        }
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label for="SubCategoryId">Alt Kategori:</label>
                                    <select class="form-select" id="SubCategoryId" name="SubCategoryId">
                                        <option value="">Alt Kategori Se√ß</option>
                                        <!-- Alt kategoriler burada dinamik olarak y√ºklenecek -->
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="form-group mb-3">
                            <label for="Price">Fiyat:</label>
                            <input type="number" class="form-control" id="Price" name="Price" value="@Model.Price" step="0.01" />
                        </div>

                        <div class="form-group mb-3">
                            <label for="Description">A√ßƒ±klama:</label>
                            <textarea class="form-control" id="Description" name="Description">@Html.Raw(Model.Description)</textarea>
                        </div>


                        <button type="submit" class="btn btn-primary">Deƒüi≈üiklikleri Kaydet</button>
                    </form>
                </div>

                <!-- Renkler ve Fotoƒüraflar Sekmesi -->
                <div class="tab-pane fade" id="variants">
                    <form method="post" enctype="multipart/form-data" action="@Url.Action("AddColorAndPhotos", "Product", new { area = "Admin" })">
                    
                        <input type="hidden" name="productId" value="@Model.Id" /> <!-- Doƒüru id g√∂nderilsin -->
                        <div class="row">
                            <h5>√úr√ºne Yeni Renk ve Fotoƒüraf Ekle</h5>
                            <div class="col-md-5">
                                <select class="form-select mb-3" id="ColorId" name="colorId"> <!-- name="colorId" olarak g√ºncellendi -->
                                    <option value="">Renk Se√ßiniz...</option>
                                    @foreach (var color in allColors)
                                    {
                                        <option value="@color.Id">@color.Name</option>
                                    }
                                </select>
                            </div>
                            <div class="col-md-6">
                                <input type="file" name="photos" class="form-control" multiple /> <!-- name="photos" olarak g√ºncellendi -->
                            </div>
                            <div class="col-md-1">
                                <button type="submit" class="btn btn-success">Kaydet</button>
                            </div>
                        </div>
                    </form>
                    
                    
                    <h5>√úr√ºne Ait Renkler ve Fotoƒüraflar</h5>
                    <div id="colorImagesContainer" data-product-id="@Model.Id" data-product-id="@Model.ColorId" >
                        @await Html.PartialAsync("_ColorImagesPartial", Model.ColorImages)
                    </div>
                </div>

                <!-- Beden ve Stok Bilgisi Sekmesi -->
                <div class="tab-pane fade" id="stock">
                    <div class="mb-3">
                        <h5>Yeni Beden ve Stok Ekle</h5>

                        <form action="/Admin/Product/AddVariant" method="post">
                            <input type="hidden" name="ProductId" value="@Model.Id" />

                        <div class="row">

                                <div class="col-md-4">
                                    
                                    <select id="colorDropdown" class="form-select" name="ColorId">
                                        <option value="">Bir renk se√ßin...</option>
                                        @foreach (var color in Model.ColorImages)
                                        {
                                            <option value="@color.ColorId">@color.ColorName</option>
                                        }
                                    </select>
                                </div>
                                <div class="col-md-4">
                                    <select class="form-select" name="SizeId">
                                        <option value="">Bir beden se√ßin...</option>
                                        
                                        @foreach (var size in allSizes)
                                        {
                                            <option value="@size.Id">@size.Name</option>
                                        }
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <input type="number" class="form-control" name="Stock" min="0" placeholder="Stok Bilgisi" />
                                </div>
                                <div class="col-md-1">
                                    <button class="btn btn-info ">Kaydet</button>
                                </div>     
                            </div>
                        </form>
                    </div>
                <br>
                    <h5>√úr√ºne Ait Beden ve Stok Bilgisi</h5>
@if (Model.Variants != null && Model.Variants.Any())
{
    <table class="table">

        <tbody>
            @foreach (var colorGroup in Model.Variants.GroupBy(v => v.ColorId))
            {
                var color = Model.ColorImages.FirstOrDefault(c => c.ColorId == colorGroup.Key);
                if (color != null)
                {
                    <tr>
                        <td colspan="5" class="text-center bg-light"><strong>@color.ColorName</strong></td>
                    </tr>
                    @foreach (var variant in colorGroup)
                    {
                        <tr>
                            <form method="post" action="/Admin/Product/UpdateVariants">
                                <input type="hidden" name="ProductId" value="@Model.Id" />
                                <input type="hidden" name="VariantId" value="@variant.Id" />
                                
                                <td>
                                    <select class="form-select" name="ColorId">
                                        <option value="@color.ColorId" selected>@color.ColorName</option>
                                    </select>
                                </td>
                                <td>
                                    <select class="form-select" name="SizeId">
                                        @foreach (var size in allSizes)
                                        {
                                            <option value="@size.Id" selected="@(size.Id == variant.SizeId ? "selected" : null)">@size.Name</option>
                                        }
                                    </select>
                                </td>
                                <td>
                                    <input type="number" class="form-control" name="Stock" value="@variant.Stock" min="0" />
                                </td>
                                <td>
                                    <button type="submit" class="btn btn-primary">Deƒüi≈üiklikleri Kaydet</button>
                                </td>
                            </form>
                            <td>
                                <button type="button" class="btn btn-danger delete-variant" data-id="@variant.Id" data-productid="@Model.Id">Sil</button>

                            </td>

                        </tr>
                    }
                }
            }
        </tbody>
    </table>
}
else
{
    <div class="alert alert-warning">Bu √ºr√ºn i√ßin beden ve stok bilgisi bulunmamaktadƒ±r.</div>
}


                    
                    

                </div>
                
            </div>
        </div>
    </div>
</div>


<!-- Modal for Image Preview and Delete -->
<div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="imageModalLabel">Fotoƒüraf G√∂r√ºnt√ºle</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <img id="modalImage" src="" alt="Fotoƒüraf" class="img-fluid" />
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" id="confirmDelete">Sil</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Kapat</button>
            </div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        document.querySelectorAll(".delete-variant").forEach(button => {
            button.addEventListener("click", function () {
                const variantId = this.getAttribute("data-id");
                const productId = this.getAttribute("data-productid");

                Swal.fire({
                    title: "Emin misiniz?",
                    text: "Bu varyantƒ± silmek istediƒüinize emin misiniz?",
                    icon: "warning",
                    showCancelButton: true,
                    confirmButtonColor: "#d33",
                    cancelButtonColor: "#3085d6",
                    confirmButtonText: "Evet, sil!",
                    cancelButtonText: "ƒ∞ptal"
                }).then((result) => {
                    if (result.isConfirmed) {
                        fetch(`/Admin/Product/DeleteVariant`, {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/x-www-form-urlencoded"
                            },
                            body: `VariantId=${variantId}`
                        })
                        .then(response => {
                            if (response.ok) {
                                Swal.fire({
                                    title: "Silindi!",
                                    text: "Varyant ba≈üarƒ±yla silindi.",
                                    icon: "success",
                                    timer: 2000,
                                    showConfirmButton: false
                                }).then(() => {
                                    location.reload(); // Sayfayƒ± yenile
                                });
                            } else {
                                Swal.fire("Hata!", "Silme i≈ülemi ba≈üarƒ±sƒ±z oldu.", "error");
                            }
                        })
                        .catch(() => {
                            Swal.fire("Hata!", "Bir ≈üeyler yanlƒ±≈ü gitti.", "error");
                        });
                    }
                });
            });
        });
    });
</script>


<script>
    // Sayfa y√ºklendiƒüinde mevcut kategori ve alt kategori deƒüerlerini ayarla
    document.addEventListener("DOMContentLoaded", function () {
        const selectedCategoryId = "@Model.CategoryId"; // Razor modelinden kategori ID'sini al
        const selectedSubCategoryId = "@Model.SubCategoryId"; // Razor modelinden alt kategori ID'sini al
        const categorySelect = document.getElementById("CategoryId");
        const subCategorySelect = document.getElementById("SubCategoryId");

        // Eƒüer kategori se√ßiliyse, alt kategorileri y√ºkle
        if (selectedCategoryId) {
            fetch(`/Admin/Product/GetSubCategories?categoryId=${selectedCategoryId}`)
                .then(response => response.json())
                .then(subCategories => {
                    subCategorySelect.innerHTML = "<option value=''>Alt kategori se√ßin</option>";
                    subCategories.forEach(subCategory => {
                        const option = document.createElement("option");
                        option.value = subCategory.id;
                        option.textContent = subCategory.name;
                        subCategorySelect.appendChild(option);
                    });

                    // Eƒüer bir alt kategori ID'si mevcutsa, bu alt kategoriyi se√ßili hale getir
                    if (selectedSubCategoryId) {
                        subCategorySelect.value = selectedSubCategoryId;
                    }

                    subCategorySelect.disabled = false; // Alt kategori se√ßimini aktif et
                })
                .catch(() => {
                    subCategorySelect.innerHTML = "<option value=''>Alt kategoriler y√ºklenemedi</option>";
                });
        } else {
            subCategorySelect.innerHTML = "<option value=''>ƒ∞lk √∂nce ana kategori se√ßin</option>";
            subCategorySelect.disabled = true; // Alt kategori se√ßimini devre dƒ±≈üƒ± bƒ±rak
        }

        // Kategori deƒüi≈ütiƒüinde alt kategorileri g√ºncelle
        categorySelect.addEventListener("change", function () {
            const categoryId = this.value;
            subCategorySelect.innerHTML = "<option value=''>Alt kategori y√ºkleniyor...</option>"; // Y√ºkleme mesajƒ±

            if (categoryId) {
                fetch(`/Admin/Product/GetSubCategories?categoryId=${categoryId}`)
                    .then(response => response.json())
                    .then(subCategories => {
                        subCategorySelect.innerHTML = "<option value=''>Alt kategori se√ßin</option>";
                        subCategories.forEach(subCategory => {
                            const option = document.createElement("option");
                            option.value = subCategory.id;
                            option.textContent = subCategory.name;
                            subCategorySelect.appendChild(option);
                        });
                        subCategorySelect.disabled = false; // Alt kategori se√ßimini aktif et
                    })
                    .catch(() => {
                        subCategorySelect.innerHTML = "<option value=''>Alt kategoriler y√ºklenemedi</option>";
                    });
            } else {
                subCategorySelect.innerHTML = "<option value=''>ƒ∞lk √∂nce ana kategori se√ßin</option>";
                subCategorySelect.disabled = true; // Alt kategori se√ßimini devre dƒ±≈üƒ± bƒ±rak
            }
        });
    });
</script>

<script>
    $(document).ready(function () {
    // Beden ve Stok Bilgisi sekmesine tƒ±klandƒ±ƒüƒ±nda sayfayƒ± yenile
    $("#stockTab").on("click", function () {
        location.reload();
    });
});

    $(document).ready(function () {
        // Sayfa y√ºklendiƒüinde localStorage'dan aktif sekmeyi al
        const activeTab = localStorage.getItem('activeTab');

        if (activeTab) {
            $('.nav-link').removeClass('active');
            $(activeTab).addClass('active');
            $(`${activeTab}`).tab('show');

            const activeTabContent = $(activeTab).data('bs-target');
            $('.tab-pane').removeClass('show active');
            $(activeTabContent).addClass('show active');
        } else {
            $('#basicTab').addClass('active');
            $('#basic').addClass('show active');
        }

        // Kullanƒ±cƒ± yeni sekmeye tƒ±kladƒ±ƒüƒ±nda localStorage'a kaydet
        $('.nav-link').on('click', function () {
            const activeTab = $(this).attr('id');
            localStorage.setItem('activeTab', `#${activeTab}`);
        });

        // üî• Sayfa y√ºklendiƒüinde renk bazlƒ± g√∂rsel sayƒ±larƒ±nƒ± al
        loadImageCounts();
    });

    // üìå Modal ile silme i≈ülemleri i√ßin deƒüi≈ükenler
    let imageToDelete = '';
    let colorIdToDelete = '';
    let productIdToDelete = '';
    let productIdFromHtml = $('#colorImagesContainer').data('product-id');

    let imageCounts = {}; // Renk bazlƒ± g√∂rsel sayƒ±sƒ±nƒ± saklayacaƒüƒ±mƒ±z nesne

    function loadImageCounts() {
        $.ajax({
            url: '/Admin/Product/GetColorImageCounts',
            type: 'GET',
            data: { productId: productIdFromHtml },
            success: function (response) {
                imageCounts = response.imageCounts || {}; // Nesne olarak sakla
                console.log("üì∏ Renk bazlƒ± ba≈ülangƒ±√ß g√∂rsel sayƒ±larƒ±:", imageCounts);
            },
            error: function () {
                console.error("‚ùå G√∂rsel sayƒ±larƒ± alƒ±nƒ±rken hata olu≈ütu!");
            }
        });
    }

    // üìå Modal a√ßma ve bilgileri kaydetme
    function openModal(imageUrl, colorId, productId) {
        imageToDelete = imageUrl;
        colorIdToDelete = colorId;
        productIdToDelete = productIdFromHtml; 
        console.log("üìå Modal A√ßƒ±ldƒ± - Atanan productId:", productIdToDelete);
        $('#modalImage').attr('src', imageUrl);
        $('#imageModal').modal('show');
    }

    // üìå Modal kapanƒ±nca verileri g√ºncelle
    $('#imageModal').on('hidden.bs.modal', function () {
        console.log("üì¢ Modal kapandƒ±, veriler yenileniyor...");
        if (productIdToDelete) {
            updateColorImagesSection(productIdToDelete);
        }
    });

    // üìå Renkler ve fotoƒüraflar b√∂l√ºm√ºn√º AJAX ile g√ºncelle
    function updateColorImagesSection(productId) {
        console.log("üîç GetColorImages i√ßin g√∂nderilen productId:", productId);

        $.ajax({
            url: '/Admin/Product/GetColorImages',
            type: 'GET',
            data: { productId: productId, _t: new Date().getTime() },
            beforeSend: function () {
                console.log("‚úÖ AJAX √ßaƒürƒ±sƒ± ba≈ülatƒ±ldƒ±...");
                $("#noDataMessage").hide();
            },
            success: function (data) {
                let container = $("#colorImagesContainer");

                console.log("‚úÖ D√∂nen API yanƒ±tƒ± (GetColorImages):", data);

                if (!data.trim()) {
                    console.warn("‚ö†Ô∏è API bo≈ü HTML d√∂nd√ºrd√º! (Silinen resim sonrasƒ±)");
                    container.html('<p id="noDataMessage">Bu √ºr√ºne ait g√∂rsel bulunmamaktadƒ±r.</p>');
                    return;
                }

                container.html(data);
                $("#noDataMessage").toggle(container.html().includes("Veri bulunamadƒ±"));
            },
            error: function () {
                console.error("‚ùå Veriler alƒ±nƒ±rken hata olu≈ütu!");
                $("#noDataMessage").show();
            }
        });
    }

    // üìå Tekli g√∂rsel silme i≈ülemi
    $(document).on("click", "#confirmDelete", function (event) {
        event.preventDefault();

        if (!imageToDelete || !colorIdToDelete) {
            Swal.fire({
                icon: 'error',
                title: 'Hata!',
                text: 'Silinecek g√∂rsel veya renk bilgileri eksik!',
                showConfirmButton: true
            });
            return;
        }

        console.log("üì§ Silme isteƒüi g√∂nderiliyor... Image URL:", imageToDelete);

        let colorImageCount = imageCounts[colorIdToDelete] || 0;

        if (colorImageCount > 1) {
            deleteImage();
            imageCounts[colorIdToDelete]--; // Renk bazlƒ± sayƒ±yƒ± azalt
        } else {
            Swal.fire({
                title: 'Son g√∂rseli siliyorsunuz!',
                text: 'Bu, bu renge ait son g√∂rsel! Eƒüer silerseniz, renk de kaldƒ±rƒ±lacaktƒ±r.',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#d33',
                cancelButtonColor: '#3085d6',
                confirmButtonText: 'Evet, sil!',
                cancelButtonText: 'Vazge√ß'
            }).then((result) => {
                if (result.isConfirmed) {
                    deleteImage();
                    imageCounts[colorIdToDelete]--; 
                }
            });
        }
    });
    $(document).on("click", "#deleteAllButton", function () {
        let colorId = $(this).data("color-id");
            let productId = $("#colorImagesContainer").data("product-id"); // √úr√ºn ID
    console.log("Product ID:", productId);
    console.log("Color ID:", colorId);



    if (!colorId || !productId) {
        Swal.fire({
            icon: 'error',
            title: 'Hata!',
            text: 'Silinecek renk bilgisi bulunamadƒ±!',
            showConfirmButton: true
        });
        return;
    }

    Swal.fire({
        title: 'Emin misiniz?',
        text: 'Bu i≈ülem, bu renge ait t√ºm g√∂rselleri, bedenleri ve stoklarƒ± silecektir!',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#d33',
        cancelButtonColor: '#3085d6',
        confirmButtonText: 'Evet, Sil!',
        cancelButtonText: 'Vazge√ß'
    }).then((result) => {
        if (result.isConfirmed) {
            $.ajax({
                url: '/Admin/Product/DeleteAllColorImages',
                method: 'POST',
                data: { productId: productId, colorId: colorId, _t: new Date().getTime() },
                beforeSend: function () {
                    console.log("üõ†Ô∏è Silme i≈ülemi ba≈ülatƒ±ldƒ±... ProductID:", productId, "ColorID:", colorId);
                },
                success: function (response) {
                    if (response.success) {
                        Swal.fire({
                            icon: 'success',
                            title: 'Ba≈üarƒ±lƒ±!',
                            text: 'T√ºm g√∂rseller, bedenler ve stoklar silindi.',
                            timer: 2000,
                            showConfirmButton: false
                        });

                        // üìå Aray√ºzde bu renge ait t√ºm verileri kaldƒ±r
                        $(`#colorImagesContainer [data-color-id='${colorId}']`).remove();
                        $(`#stockTable tr[data-color-id='${colorId}']`).remove();

                    } else {
                        Swal.fire({
                            icon: 'error',
                            title: 'Hata!',
                            text: response.message || 'Silme i≈ülemi ba≈üarƒ±sƒ±z oldu!',
                            showConfirmButton: true
                        });
                    }
                },
                error: function () {
                    Swal.fire({
                        icon: 'error',
                        title: 'Hata!',
                        text: 'Silme i≈ülemi sƒ±rasƒ±nda bir hata olu≈ütu!',
                        showConfirmButton: true
                    });
                }
            });
        }
    });
});


    // üìå Silme i≈ülemi
    function deleteImage() {
        $.ajax({
            url: '/Admin/Product/DeleteImage',
            method: 'POST',
            data: { imageUrl: imageToDelete, _t: new Date().getTime() },
            success: function (response) {
                if (response.success) {
                    Swal.fire({
                        icon: 'success',
                        title: 'Ba≈üarƒ±lƒ±!',
                        text: 'Resim ba≈üarƒ±yla silindi.',
                        timer: 2000,
                        showConfirmButton: false
                    });

                    $('#imageModal').modal('hide');

                    if (!response.hasRemainingImages) {
                        console.warn("‚ö†Ô∏è Bu renge ait ba≈üka g√∂rsel yok, renk kaldƒ±rƒ±lƒ±yor!");
                        $(`#colorImagesContainer [data-color-id='${colorIdToDelete}']`).remove();
                        $(`#stockTable tr[data-color-id='${colorIdToDelete}']`).remove();

                        $.ajax({
                            url: '/Admin/Product/DeleteColorStocks',
                            method: 'POST',
                            data: { 
                                colorId: colorIdToDelete, 
                                productId: productIdToDelete, 
                                _t: new Date().getTime() 
                            },
                            success: function (stockResponse) {
                                console.log("‚úÖ D√∂nen API yanƒ±tƒ± (DeleteColorStocks):", stockResponse);
                                if (stockResponse.success) {
                                    Swal.fire({
                                        icon: 'success',
                                        title: 'Ba≈üarƒ±lƒ±!',
                                        text: 'Renge ait t√ºm stoklar silindi!',
                                        timer: 2000,
                                        showConfirmButton: false
                                    });
                                } else {
                                    Swal.fire({
                                        icon: 'error',
                                        title: 'Hata!',
                                        text: stockResponse.message,
                                        showConfirmButton: true
                                    });
                                }
                            },
                            error: function () {
                                console.error("‚ùå Beden ve stok bilgileri silinirken hata olu≈ütu!");
                            }
                        });

                    } else {
                        setTimeout(() => updateColorImagesSection(productIdToDelete), 1000);
                    }
                } else {
                    Swal.fire({
                        icon: 'error',
                        title: 'Hata!',
                        text: 'Resim bulunamadƒ±!',
                        showConfirmButton: true
                    });
                }
            },
            error: function () {
                Swal.fire({
                    icon: 'error',
                    title: 'Hata!',
                    text: 'Silme i≈ülemi sƒ±rasƒ±nda bir hata olu≈ütu!',
                    showConfirmButton: true
                });
            }
        });
    }
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tinymce/7.6.0/tinymce.min.js" integrity="sha512-/4EpSbZW47rO/cUIb0AMRs/xWwE8pyOLf8eiDWQ6sQash5RP1Cl8Zi2aqa4QEufjeqnzTK8CLZWX7J5ZjLcc1Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
    tinymce.init({
        selector: '#Description'
    });
</script>
<script>
    document.getElementById("Price").addEventListener("input", function(event) {
        let inputValue = event.target.value;

        // Virg√ºl yerine nokta koy
        event.target.value = inputValue.replace(",", ".");
    });
</script>
